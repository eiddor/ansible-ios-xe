---

- name: Show Commands Playbook
  hosts: csr
  gather_facts: no
  connection: local

  tasks:
  - name: Get Login credentials
    include_vars: /mnt/hgfs/vm_shared/ansible/access.yml

  - name: Define Provider
    set_fact:
      provider:
        host: "{{ access['device_ip'] }}"
        username: "{{ access['username'] }}"
        password: "{{ access['password'] }}"

  - name: Run 'show output'
    ios_command:
      provider: "{{ provider }}"
      authorize: yes
      commands:
      # "CLI" is the variable for any show command on the $prompt
        - "{{ cli }}"
#  For example, for "show vrf" you coul use:  ansible$  ansible-playbook -1 hosts ios-show.yml -e "cli='show vrf'"
      
    register: output

  - debug: var=output.stdout_lines


...
